<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.1">
<title data-rh="true">netkeiba ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ LOD åŒ–ã™ã‚‹ï¼ˆ7ï¼‰ | Kiai de Nantoka</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ningensei848.github.io/2023/03/03"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="twitter:title" content="Kiai de Nantoka"><meta data-rh="true" http-equiv="content-language" content="ja"><meta data-rh="true" property="og:title" content="netkeiba ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ LOD åŒ–ã™ã‚‹ï¼ˆ7ï¼‰ | Kiai de Nantoka"><meta data-rh="true" name="description" content="å‰å›ã®è¨˜äº‹ã§ã¯ã€æ§‹æƒ³ã‚’ç·´ã‚‹ã¨ã“ã‚ã¾ã§ã‚„ã£ãŸã€‚"><meta data-rh="true" property="og:description" content="å‰å›ã®è¨˜äº‹ã§ã¯ã€æ§‹æƒ³ã‚’ç·´ã‚‹ã¨ã“ã‚ã¾ã§ã‚„ã£ãŸã€‚"><meta data-rh="true" name="keywords" content="python,ç«¶é¦¬,GCS,DWH"><meta data-rh="true" property="og:image" content="https://custom-og-image-generator.vercel.app/api/**netkeiba.com**%20%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E3%82%B9%E3%82%AF%E3%83%AC%E3%82%A4%E3%83%94%E3%83%B3%E3%82%B0%E3%81%97%E3%81%A6LOD%E5%8C%96%E3%81%99%E3%82%8B%EF%BC%887%EF%BC%89.png?theme=light&amp;copyright=Kiai+de+Nantoka&amp;logo=https%3A%2F%2Fimg.icons8.com%2Fglyph-neue%2F64%2F000000%2Fhorse.png&amp;avater=https%3A%2F%2Favatars.githubusercontent.com%2Fu%2F20794309&amp;author=Kiai&amp;aka=%40Ningensei848&amp;site=%E6%B0%97%E5%90%88%E3%81%A7%E3%81%AA%E3%82%93%E3%81%A8%E3%81%8B&amp;tags=python&amp;tags=%E7%AB%B6%E9%A6%AC&amp;tags=GCS&amp;tags=DWH"><meta data-rh="true" name="twitter:image" content="https://custom-og-image-generator.vercel.app/api/**netkeiba.com**%20%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E3%82%B9%E3%82%AF%E3%83%AC%E3%82%A4%E3%83%94%E3%83%B3%E3%82%B0%E3%81%97%E3%81%A6LOD%E5%8C%96%E3%81%99%E3%82%8B%EF%BC%887%EF%BC%89.png?theme=light&amp;copyright=Kiai+de+Nantoka&amp;logo=https%3A%2F%2Fimg.icons8.com%2Fglyph-neue%2F64%2F000000%2Fhorse.png&amp;avater=https%3A%2F%2Favatars.githubusercontent.com%2Fu%2F20794309&amp;author=Kiai&amp;aka=%40Ningensei848&amp;site=%E6%B0%97%E5%90%88%E3%81%A7%E3%81%AA%E3%82%93%E3%81%A8%E3%81%8B&amp;tags=python&amp;tags=%E7%AB%B6%E9%A6%AC&amp;tags=GCS&amp;tags=DWH"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-03-03T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://twitter.com/Ningensei848"><meta data-rh="true" property="article:tag" content="python,ç«¶é¦¬,GCS,DWH"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ningensei848.github.io/2023/03/03"><link data-rh="true" rel="alternate" href="https://ningensei848.github.io/2023/03/03" hreflang="en"><link data-rh="true" rel="alternate" href="https://ningensei848.github.io/2023/03/03" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://ningensei848.github.io/2023/03/03/","mainEntityOfPage":"https://ningensei848.github.io/2023/03/03/","url":"https://ningensei848.github.io/2023/03/03/","headline":"netkeiba ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ LOD åŒ–ã™ã‚‹ï¼ˆ7ï¼‰","name":"netkeiba ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ LOD åŒ–ã™ã‚‹ï¼ˆ7ï¼‰","description":"å‰å›ã®è¨˜äº‹ã§ã¯ã€æ§‹æƒ³ã‚’ç·´ã‚‹ã¨ã“ã‚ã¾ã§ã‚„ã£ãŸã€‚","datePublished":"2023-03-03T00:00:00.000Z","author":{"@type":"Person","name":"Kiai","description":"@Ningensei848","url":"https://twitter.com/Ningensei848","email":"k.kubokawa@klis.tsukuba.ac.jp","image":"https://avatars.githubusercontent.com/u/20794309"},"image":{"@type":"ImageObject","@id":"https://custom-og-image-generator.vercel.app/api/**netkeiba.com**%20%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E3%82%B9%E3%82%AF%E3%83%AC%E3%82%A4%E3%83%94%E3%83%B3%E3%82%B0%E3%81%97%E3%81%A6LOD%E5%8C%96%E3%81%99%E3%82%8B%EF%BC%887%EF%BC%89.png?theme=light&copyright=Kiai+de+Nantoka&logo=https%3A%2F%2Fimg.icons8.com%2Fglyph-neue%2F64%2F000000%2Fhorse.png&avater=https%3A%2F%2Favatars.githubusercontent.com%2Fu%2F20794309&author=Kiai&aka=%40Ningensei848&site=%E6%B0%97%E5%90%88%E3%81%A7%E3%81%AA%E3%82%93%E3%81%A8%E3%81%8B&tags=python&tags=%E7%AB%B6%E9%A6%AC&tags=GCS&tags=DWH","url":"https://custom-og-image-generator.vercel.app/api/**netkeiba.com**%20%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E3%82%B9%E3%82%AF%E3%83%AC%E3%82%A4%E3%83%94%E3%83%B3%E3%82%B0%E3%81%97%E3%81%A6LOD%E5%8C%96%E3%81%99%E3%82%8B%EF%BC%887%EF%BC%89.png?theme=light&copyright=Kiai+de+Nantoka&logo=https%3A%2F%2Fimg.icons8.com%2Fglyph-neue%2F64%2F000000%2Fhorse.png&avater=https%3A%2F%2Favatars.githubusercontent.com%2Fu%2F20794309&author=Kiai&aka=%40Ningensei848&site=%E6%B0%97%E5%90%88%E3%81%A7%E3%81%AA%E3%82%93%E3%81%A8%E3%81%8B&tags=python&tags=%E7%AB%B6%E9%A6%AC&tags=GCS&tags=DWH","contentUrl":"https://custom-og-image-generator.vercel.app/api/**netkeiba.com**%20%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E3%82%B9%E3%82%AF%E3%83%AC%E3%82%A4%E3%83%94%E3%83%B3%E3%82%B0%E3%81%97%E3%81%A6LOD%E5%8C%96%E3%81%99%E3%82%8B%EF%BC%887%EF%BC%89.png?theme=light&copyright=Kiai+de+Nantoka&logo=https%3A%2F%2Fimg.icons8.com%2Fglyph-neue%2F64%2F000000%2Fhorse.png&avater=https%3A%2F%2Favatars.githubusercontent.com%2Fu%2F20794309&author=Kiai&aka=%40Ningensei848&site=%E6%B0%97%E5%90%88%E3%81%A7%E3%81%AA%E3%82%93%E3%81%A8%E3%81%8B&tags=python&tags=%E7%AB%B6%E9%A6%AC&tags=GCS&tags=DWH","caption":"title image for the blog post: netkeiba ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ LOD åŒ–ã™ã‚‹ï¼ˆ7ï¼‰"},"keywords":["python","ç«¶é¦¬","GCS","DWH"],"isPartOf":{"@type":"Blog","@id":"https://ningensei848.github.io/","name":"æ°—åˆã§ãªã‚“ã¨ã‹"}}</script><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="æ°—åˆã§ãªã‚“ã¨ã‹ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="æ°—åˆã§ãªã‚“ã¨ã‹ Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="æ°—åˆã§ãªã‚“ã¨ã‹ JSON Feed">



<link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
<link rel="icon" sizes="32x32" href="/img/favicon-32x32.png">
<link rel="icon" sizes="16x16" href="/img/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/img/safari-pinned-tab.svg" color="rgb(25, 150, 4)">
<meta rel="apple-mobile-web-app-title" content="æ°—åˆã§ãªã‚“ã¨ã‹">
<meta rel="application-name" content="æ°—åˆã§ãªã‚“ã¨ã‹">
<meta name="theme-color" content="rgb(25, 150, 4)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="msapplication-TileImage" content="/img/mstile-150x150.png">
<meta name="msapplication-TileColor" content="#199604">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-PCHTT2T",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>
<link rel="preconnect" href="//fonts.gstatic.com" crossorigin="anonymous">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7857289120965920" crossorigin="anonymous"></script>
<script>window.twttr=function(t,e,r){var n,i=t.getElementsByTagName(e)[0],w=window.twttr||{};return t.getElementById(r)||((n=t.createElement(e)).id=r,n.src="https://platform.twitter.com/widgets.js",i.parentNode.insertBefore(n,i),w._e=[],w.ready=function(t){w._e.push(t)}),w}(document,"script","twitter-wjs")</script><link rel="stylesheet" href="/assets/css/styles.16ea1a46.css">
<script src="/assets/js/runtime~main.59e828e7.js" defer="defer"></script>
<script src="/assets/js/main.89b65eb2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PCHTT2T" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Kiai de Nantoka" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo_dark.svg" alt="Kiai de Nantoka" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Kiai de Nantoka</b></a></div><div class="navbar__items navbar__items--right"><a href="https://zenn.dev/ningensei848" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-zenn-link" aria-label="Zenn.dev Articles"></a><a href="https://twitter.com/Ningensei848" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-twitter-link" aria-label="Author on Twitter"></a><a href="https://github.com/ningensei848/ningensei848.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All our posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2024/08/25">æ—¥è¨˜2024å¤</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2024/05/01">zsh ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç®¡ç†ã‚’è€ƒãˆã‚‹</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2024/04/29">.dotfiles ã§ç®¡ç†ã—ãŸã„</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2024/04/21">ï¼ˆæœ€è¿‘ã®å‹•ãã¨ï¼‰ï¼”æœˆã‹ã‚‰ã®è©±</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2024/01/27">ãã—ã¦ã€2024å¹´</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2023/07/05">å®˜åºè¨ªå• in 2023</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/2023/03/03">netkeiba ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ LOD åŒ–ã™ã‚‹ï¼ˆ7ï¼‰</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2023/02/07">netkeiba ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ LOD åŒ–ã™ã‚‹ï¼ˆ6ï¼‰</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2023/02/01">2023 å¹´ã‚’è€ƒãˆã‚‹</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/11/14">ML4Keiba ã‚’å…·ä½“çš„ã«è€ƒãˆã¦ã„ã</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/11/07">Docusaurus v2.2 ã¸æ›´æ–°ã—ãŸ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/06/17">Tweet ã‚’ä¸ç‰¹å®šå¤šæ•°ã®äººã€…&quot;ã‚’åˆ©ç”¨ã—ã¦&quot;é›†ã‚ãŸã„</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/06/09">ML4Keiba ã®å±•æœ›</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/06/08">GitHub Codespaces ã‚„ã£ã¹ã‡ã‚“ã§ã™ã®ï¼ã¨ã„ã†ã”å ±å‘Š</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/05/15">Twitter API v2 (Elevated) ã¯ã„ã„ã‘ã©ã‚ˆããªã„ã¨ã„ã†è©±</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/05/11">PC ç’°å¢ƒãŒãªããªã£ã¦1ãƒ¶æœˆåŠãŒçµŒéã—ãŸã‘ã©â€¦ï¼Ÿ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/04/06">ã€ã‚ªãƒ¼ãƒ—ãƒ³ãƒ¬ã‚¿ãƒ¼ã€‘ç½²åè€…ã‚’æ¤œç´¢ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’ã¤ãã£ãŸã€#againstcã€‘</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/04/01">è²¸ä¸PCã‚’è¿”å´ã—ã¦æ‰‹å…ƒã«ã¯iPadã—ã‹æ®‹ã•ã‚Œã¦ã„ã­ã‡</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/03/30">netkeiba ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ LOD åŒ–ã™ã‚‹ï¼ˆï¼•ï¼‰</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/03/28">netkeiba ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ LOD åŒ–ã™ã‚‹ï¼ˆï¼”ï¼‰</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/03/23">netkeiba ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ LOD åŒ–ã™ã‚‹ï¼ˆï¼“ï¼‰</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/03/13">LOD Challenge 2021 æˆè³å¼ã«å‚åŠ ã—ãŸ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/03/12">netkeiba ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ LOD åŒ–ã™ã‚‹ï¼ˆï¼’ï¼‰</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/03/08">netkeiba ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ LOD åŒ–ã™ã‚‹ï¼ˆï¼‘ï¼‰</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/03/03">å€‹äººãƒ–ãƒ­ã‚°ã‚’ Docusaurus ã§å†å§‹å‹•ã™ã‚‹</a></li></ul></nav></aside><main class="col col--7"><article><header><h1 class="title_f1Hy">netkeiba ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ LOD åŒ–ã™ã‚‹ï¼ˆ7ï¼‰</h1><div class="container_mt6G margin-vert--md"><time datetime="2023-03-03T00:00:00.000Z">March 3, 2023</time></div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/Ningensei848" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/20794309" alt="Kiai"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://twitter.com/Ningensei848" target="_blank" rel="noopener noreferrer"><span>Kiai</span></a></div><small class="avatar__subtitle">@Ningensei848</small></div></div></div></div></header><meta itemprop="image" content="https://custom-og-image-generator.vercel.app/api/**netkeiba.com**%20%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E3%82%B9%E3%82%AF%E3%83%AC%E3%82%A4%E3%83%94%E3%83%B3%E3%82%B0%E3%81%97%E3%81%A6LOD%E5%8C%96%E3%81%99%E3%82%8B%EF%BC%887%EF%BC%89.png?theme=light&amp;copyright=Kiai+de+Nantoka&amp;logo=https%3A%2F%2Fimg.icons8.com%2Fglyph-neue%2F64%2F000000%2Fhorse.png&amp;avater=https%3A%2F%2Favatars.githubusercontent.com%2Fu%2F20794309&amp;author=Kiai&amp;aka=%40Ningensei848&amp;site=%E6%B0%97%E5%90%88%E3%81%A7%E3%81%AA%E3%82%93%E3%81%A8%E3%81%8B&amp;tags=python&amp;tags=%E7%AB%B6%E9%A6%AC&amp;tags=GCS&amp;tags=DWH"><div id="__blog-post-container" class="markdown"><p><a href="/2023/02/07">å‰å›ã®è¨˜äº‹</a>ã§ã¯ã€æ§‹æƒ³ã‚’ç·´ã‚‹ã¨ã“ã‚ã¾ã§ã‚„ã£ãŸã€‚</p>
<p><img decoding="async" loading="lazy" alt="ML4Keiba Workflow" src="/assets/images/ml4keiba_workflow-bc65a50599c111d74a8f09086f2f214b.png" width="1194" height="1076" class="img_ev3q"></p>
<p>è‹¦ç¯€ä¸€ãƒ¶æœˆã€ã¤ã„ã«å®Ÿç¾ã—<strong>æ¯æ—¥è‡ªå‹•ã§ãƒ‡ãƒ¼ã‚¿ã‚’é›†ã‚ã€ãã‚ŒãŒ BigQuery ã«ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸ</strong>ã®ã§ã€è‹¦åŠ´ã—ãŸç‚¹ã‚’ã¤ã‚‰ã¤ã‚‰ã¨æ›¸ã„ã¦ã„ãã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç›®æ¬¡">ç›®æ¬¡<a href="#ç›®æ¬¡" class="hash-link" aria-label="Direct link to ç›®æ¬¡" title="Direct link to ç›®æ¬¡">â€‹</a></h2>
<ol>
<li>ãã‚‚ãã‚‚ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆ(Pub/Sub)ã®å½¹å‰²ãŒã‚ã‹ã£ã¦ã„ãªã‹ã£ãŸ</li>
<li>CloudEvent ã£ã¦ãªã«ï¼Ÿ</li>
<li>ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã® Cloud Functions (Gen 2) ã¯ã©ã†ã‚„ã£ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã®ï¼Ÿ</li>
<li>BigQuery ã«ã¯ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ãŒç„¡ã„ï¼</li>
<li>BigQuery ã¯ä½•ã§ã‚‚å…¥ã‚Œã‚Œã°ã„ã„ã‚ã‘ã§ã¯ãªã„</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-pubsub-ã®å½¹å‰²">1. Pub/Sub ã®å½¹å‰²<a href="#1-pubsub-ã®å½¹å‰²" class="hash-link" aria-label="Direct link to 1. Pub/Sub ã®å½¹å‰²" title="Direct link to 1. Pub/Sub ã®å½¹å‰²">â€‹</a></h2>
<p><a href="https://cloud.google.com/scheduler" target="_blank" rel="noopener noreferrer">Cloud Scheduler</a> ã«ã¤ã„ã¦ã¯ã€ã¾ãã™ãã«ç†è§£ã§ããŸã€‚
å˜ã« Cron ã‚’è¨­å®šã—ã¦ãã®æ™‚é–“é€šã‚Šã« Pub/Sub ã‚’èµ·å‹•ã™ã‚‹ã ã‘ã ã‹ã‚‰ã ã€‚</p>
<p>ãŒã€ã€ŒPub/Sub èµ·å‹•ã™ã‚‹ã€ã£ã¦ãªã«ï¼Ÿï¼Ÿï¼Ÿã¨ãªã£ã¦ã—ã¾ã£ãŸã€‚ã€‚ã€‚</p>
<hr>
<blockquote>
<p>Pub/Sub ã¯ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”Ÿæˆã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã€ãã‚Œã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡¦ç†ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã¨åˆ‡ã‚Šé›¢ã™ã€éåŒæœŸã®ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚° ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚</p>
<p>cf. <a href="https://cloud.google.com/pubsub/docs/overview" target="_blank" rel="noopener noreferrer">https://cloud.google.com/pubsub/docs/overview</a></p>
</blockquote>
<p>ã“ã‚Œã ã‘ã‚’ ã¯ã˜ã‚ã¦èª­ã‚“ã ã¨ãã¯ã€Œï¼Ÿï¼Ÿï¼Ÿã€ã¨ã—ã‹ãªã‚‰ãªã„ã¨æ€ã†ã‚“ã ãŒã€æ¬¡ã®è¨˜äº‹ã‚’èª­ã¿ã¤ã¤è‡ªåˆ†ã§æ‰‹ã‚’å‹•ã‹ã—ã¦ã¿ã‚‹ã“ã¨ã§ç†è§£ã™ã‚‹ã“ã¨ãŒã§ããŸï¼š</p>
<blockquote>
<p><a href="https://laboratory.kiyono-co.jp/69/gcp/" target="_blank" rel="noopener noreferrer">ã€å›³è§£ä»˜ãã€‘Cloud Pub/Sub ã«æ¦‚è¦ã‚„ä½¿ã„æ–¹ã«ã¤ã„ã¦ã‚ã‹ã‚Šã‚„ã™ãè§£èª¬ - KIYONO Engineer Blog</a></p>
</blockquote>
<p><a href="https://laboratory.kiyono-co.jp/69/gcp/" target="_blank" rel="noopener noreferrer">https://laboratory.kiyono-co.jp/69/gcp/</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ãŒãªã„ã¨">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ãŒãªã„ã¨â€¦â€¦<a href="#ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ãŒãªã„ã¨" class="hash-link" aria-label="Direct link to ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ãŒãªã„ã¨â€¦â€¦" title="Direct link to ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ãŒãªã„ã¨â€¦â€¦">â€‹</a></h4>
<p>Pub/Sub ã®ã‚ˆã†ãªãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãŒãªã„å ´åˆã€ãƒ‡ãƒ¼ã‚¿ã®ã€Œé€ä¿¡å…ƒã€ã€Œå—ä¿¡å…ˆã€ãŒã™ã¹ã¦ï¼‘å¯¾ï¼‘å¯¾å¿œã«ãªã£ã¦ã—ã¾ã„ã€è¤‡é›‘ã‹ã¤æƒ…å ±ãƒ­ã‚¹ãƒˆã®ãƒªã‚¹ã‚¯ãŒå¢—ãˆã¦ã—ã¾ã†ã€‚
ä¾‹ã®é€šã‚Šï¼”ï¼šï¼”ã®æ§‹æˆã ã¨ã€4 * 4 = 16 é€šã‚Šã®çµŒè·¯ãŒç”Ÿã˜ã‚‹ã—ã€n å€‹ã®æ§‹æˆç‰©ãŒã‚ã‚Œã° n^2 ã«å¢—å¤§ã—ã¦ã—ã¾ã†ã€‚ã€‚ã€‚</p>
<p><a href="https://laboratory.kiyono-co.jp/69/gcp/" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" alt="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã®ãªã„ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³" src="/assets/images/without_pubsub-b55817bc3c283ae95cd49874bc561767.jpeg" width="960" height="540" class="img_ev3q"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ãŒã‚ã‚‹ã¨">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ãŒã‚ã‚‹ã¨â€¦â€¦<a href="#ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ãŒã‚ã‚‹ã¨" class="hash-link" aria-label="Direct link to ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ãŒã‚ã‚‹ã¨â€¦â€¦" title="Direct link to ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ãŒã‚ã‚‹ã¨â€¦â€¦"> â€‹</a></h4>
<p>é–“ã« Pub/Sub ã‚’æŒŸã‚€ã“ã¨ã§ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã«ç®¡ç†ã‚’é›†ä¸­ã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
çµŒè·¯ã¯ä¸€ç®‡æ‰€ã«ã¾ã¨ã‚ã‚‰ã‚Œã‚‹ã—ã€Pub/Sub ã¯æ©Ÿèƒ½ã—ãŸã‹ã ã‘ã‚’æ°—ã«ã—ã¦ã„ã‚Œã°ã‚ˆã„ã€‚</p>
<p><a href="https://laboratory.kiyono-co.jp/69/gcp/" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" alt="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã‚’äº¤ãˆãŸã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³" src="/assets/images/with_pubsub-af99ac88720b0b17c7cfb2326a7898cc.jpeg" width="960" height="540" class="img_ev3q"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ml4keiba-ã§ã¯">ML4Keiba ã§ã¯<a href="#ml4keiba-ã§ã¯" class="hash-link" aria-label="Direct link to ML4Keiba ã§ã¯" title="Direct link to ML4Keiba ã§ã¯">â€‹</a></h4>
<ol>
<li>Pub/Sub ã§ãƒˆãƒ”ãƒƒã‚¯ã‚’ä½œæˆã™ã‚‹<!-- -->
<ul>
<li>ãŸã ä½œæˆã™ã‚‹ã ã‘</li>
<li>å‡¦ç†ã‚’ä»²ä»‹ã™ã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å®šç¾©ã™ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒè¿‘ã„</li>
</ul>
</li>
<li>ã“ã®ãƒˆãƒ”ãƒƒã‚¯ã‚’æŒ‡å®šã—ã¦ Cloud Functions é–¢æ•°ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤<!-- -->
<ul>
<li>è³¼èª­ã™ã‚‹ï¼ˆSubscript ã™ã‚‹ï¼‰ã®ãŒã“ã®é–¢æ•°</li>
<li>è¨€ã„æ›ãˆã‚Œã°ã€æŒ‡å®šãƒˆãƒ”ãƒƒã‚¯ã®ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒãƒ¼ã®ä¸€ã¤ã¨ã—ã¦ã“ã®é–¢æ•°ã‚’æŒ‡å®šã™ã‚‹</li>
</ul>
</li>
<li>Cloud Scheduler ã‹ã‚‰æ¯æ—¥å®šæ™‚ã«äº‹å‰è¨­å®šã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ <strong>Pub/Sub ã®ãƒˆãƒ”ãƒƒã‚¯ã«å‘ã‘ã¦ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ¥</strong>ã™ã‚‹</li>
</ol>
<p>ã“ã†ã—ã¦ã€Pub/Sub ä¸Šã®æŒ‡å®šãƒˆãƒ”ãƒƒã‚¯ãŒå—ã‘å–ã£ãŸãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã‚’ã€ãã®ã¾ã¾ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒãƒ¼ãŸã¡ã«é€ä¿¡ã™ã‚‹ã“ã¨ãŒã§ããŸ
ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ¥ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€šã˜ã¦ CF é–¢æ•°ã‚’ç™ºç«ã•ã›ã‚‹ã“ã¨ãŒã§ããŸï¼‰</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="å‹˜é•ã„ã—ãŸã“ã¨">å‹˜é•ã„ã—ãŸã“ã¨<a href="#å‹˜é•ã„ã—ãŸã“ã¨" class="hash-link" aria-label="Direct link to å‹˜é•ã„ã—ãŸã“ã¨" title="Direct link to å‹˜é•ã„ã—ãŸã“ã¨">â€‹</a></h4>
<p>èª¤ã‚Šã€€ â†’ ã€€ã€ŒPub/Sub ã¯ Cloud Scheduler ã‹ã‚‰ã—ã‹èµ·å‹•ã§ããªã„ï¼ã€</p>
<p>æ­£è§£ã€€ â†’ ã€€ã€ŒPub/Sub ã¯ <strong>å¤šæ§˜ãª Publisher ã‹ã‚‰èµ·å‹•ã§ãã‚‹</strong>ã€</p>
<hr>
<p>Cloud Scheduler ã¯ã‚ãã¾ã§æ•°ã‚ã‚‹ Publisher ã®ä¸€ã¤ã§ã—ã‹ãªãã€Google ãŒãŠæ‰‹è»½ Cron ã¨ã—ã¦æä¾›ã—ã¦ã„ã‚‹ã ã‘ã§ã‚ã‚‹ã€‚</p>
<blockquote>
<p>Pub/Sub ç’°å¢ƒã¯ã€Google Cloud Consoleã€Cloud Shellã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€REST API ã®ã„ãšã‚Œã‹ã‚’ä½¿ç”¨ã—ã¦è¨­å®šã§ãã¾ã™ã€‚</p>
<p>cf. <a href="https://cloud.google.com/pubsub/docs/publish-receive-messages-client-library" target="_blank" rel="noopener noreferrer">Pub/Sub ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª</a></p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-cloudevent-ã¨ã¯">2. CloudEvent ã¨ã¯<a href="#2-cloudevent-ã¨ã¯" class="hash-link" aria-label="Direct link to 2. CloudEvent ã¨ã¯" title="Direct link to 2. CloudEvent ã¨ã¯">â€‹</a></h2>
<p>Q. Pub/Sub ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚Œã‚‹ã®ã¯ã‚ã‹ã£ãŸã‘ã©ã€Cloud Functions ã§ã©ã†ã‚„ã£ã¦ãã‚Œã‚’è³¼èª­ã™ã‚Œã°ã„ã„ã®ï¼Ÿ
ï¼ˆPub/Sub ã®ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒãƒ¼ã£ã¦ã©ã†ã™ã‚Œã°è¨­å®šã§ãã‚‹ã®ï¼Ÿï¼‰</p>
<p>A. <a href="https://github.com/cloudevents/sdk-python/blob/main/cloudevents/http/event.py" target="_blank" rel="noopener noreferrer">CloudEvent ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</a>ã‚’å¼•æ•°ã¨ã—ã¦å—ã‘å…¥ã‚Œã‚‹ CloudEvent é–¢æ•°ã‚’ä½œæˆã™ã‚‹</p>
<hr>
<p><a href="https://github.com/python/mypy" target="_blank" rel="noopener noreferrer"><code>mypy</code></a> ã§å‹ä»˜ã‘ã‚‹æ™‚ã«ã©ãªã„ã™ã‚“ã­ã‚“ ğŸ’¢
ã¨ãƒ–ãƒåˆ‡ã‚ŒãŸãŒã€åˆ¥é€” <a href="https://github.com/cloudevents/sdk-python" target="_blank" rel="noopener noreferrer"><code>cloudevents</code></a> ã‚’å…¥ã‚Œã¦ã‚„ã‚Œã°ã‚ˆã‹ã£ãŸã€‚
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ã—ã¦ <code>attributes</code> ã¨ <code>data</code> ãŒå«ã¾ã‚Œã¦ãŠã‚Šã€ãã® <code>data</code> å†…ã«ã¯ã€Pub/Sub ãŒãƒˆãƒªã‚¬ãƒ¼ã—ãŸã‚¤ãƒ™ãƒ³ãƒˆã§ã¯(ç¬¬ï¼’ä¸–ä»£ Cloud Functions ã®å ´åˆ)ä»¥ä¸‹ã®ã‚ˆã†ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå«ã¾ã‚Œã¦ã„ã‚‹ï¼š</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">MessagePublishedData</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;message&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// æ³¨ï¼‰data ã¯ base64 ã§ encode ã•ã‚Œã¦ã„ã‚‹ â†’ ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ã¦ã‚„ã‚‹å¿…è¦ã‚ã‚Š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">&quot;data&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">&quot;attributes&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">string</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">&quot;messageId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">&quot;publishTime&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">&quot;orderingKey&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p><a href="https://cloud.google.com/functions/docs/writing/write-event-driven-functions" target="_blank" rel="noopener noreferrer">ã‚¤ãƒ™ãƒ³ãƒˆ ãƒ‰ãƒªãƒ–ãƒ³é–¢æ•°ã‚’ä½œæˆã™ã‚‹ Â |Â  Google Cloud Functions ã«é–¢ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã§ã‚‚èª¬æ˜ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€ Cloud Function (Gen 2) ã«ãŠã„ã¦ã¯ã™ã¹ã¦ã€ŒCloudEvent é–¢æ•°ã€ã‚’ä½¿ç”¨ã™ã‚‹ã€‚</p></div></div>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>Pub/Sub ãƒˆãƒªã‚¬ãƒ¼ã‚’ CloudEvent é–¢æ•°ã§ä½¿ã†å ´åˆã€ãƒ‡ãƒ¼ã‚¿ã®ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã¯ <a href="https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/pubsub/v1/data.proto" target="_blank" rel="noopener noreferrer"><code>MessagePublishedData</code></a> ã«ãªã‚‹ã€‚</p><p><a href="https://cloud.google.com/functions/docs/tutorials/pubsub#preparing_the_application" target="_blank" rel="noopener noreferrer">Cloud Pub/Sub ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ï¼ˆç¬¬ 2 ä¸–ä»£ï¼‰ Â |Â  Google Cloud Functions ã«é–¢ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã«ã‚‚ã‚ã‚‹é€šã‚Šã€<code>cloud_event.data[&quot;message&quot;][&quot;data&quot;]</code> ã¨ã„ã†å½¢ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã€‚</p><p>å¾—ã‚‰ã‚Œã‚‹æ–‡å­—åˆ—ã¯ <strong><code>base64</code> ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸæ–‡å­—åˆ—</strong>ã§ã‚ã‚‹ã“ã¨ã«ã‚‚ç•™æ„ã™ã‚‹ã“ã¨ã€‚</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰">ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰<a href="#ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰" class="hash-link" aria-label="Direct link to ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰" title="Direct link to ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰">â€‹</a></h3>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Python</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">TypeScript</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">sample.py</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> base64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> functions_framework</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> cloudevents</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">http </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> CloudEvent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Triggered from a message on a Cloud Pub/Sub topic.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@functions_framework</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">cloud_event</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cloud_event</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CloudEvent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Your code here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Access the CloudEvent data payload via cloud_event.data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># base64 encoded string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cloud_event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;message&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;data&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    byte_string</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">bytes</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> base64</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">b64decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    decoded_txt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> byte_string</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">decoded_txt</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">sample.ts</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> functions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> CloudEvent </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@google-cloud/functions-framework&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> MessagePublishedData </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@google/events/cloud/pubsub/v1/MessagePublishedData&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Triggered from a message on a Cloud Pub/Sub topic.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">functions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token generic-function function" style="color:#d73a49">cloudEvent</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name">MessagePublishedData</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;subscribe&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cloudEvent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Your code here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Access the CloudEvent data payload via cloudEvent.data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// base64 encoded string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cloud_event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;message&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;data&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    byte_string </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;base64&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    decoded_txt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> byte_string</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    concole</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">decoded_txt</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div>
<p>ã¤ã¾ã‚Šã€Pub/Sub ã§ãƒˆãƒªã‚¬ãƒ¼ã—ãŸ Cloud Functions é–¢æ•°ã¯ã€<code>subscribe()</code> ä»¥ä¸‹ã‚’èµ·ç‚¹ã¨ã—ã¦å®Ÿè¡Œã™ã‚Œã°ã‚ˆã„ã€‚</p>
<p>cf. <a href="https://cloud.google.com/functions/docs/tutorials/pubsub" target="_blank" rel="noopener noreferrer">Cloud Pub/Sub ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ï¼ˆç¬¬ 2 ä¸–ä»£ï¼‰ Â |Â  Google Cloud Functions ã«é–¢ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã®-cloud-functions-gen-2-ã®ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•">3. ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã® Cloud Functions (Gen 2) ã®ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•<a href="#3-ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã®-cloud-functions-gen-2-ã®ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•" class="hash-link" aria-label="Direct link to 3. ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã® Cloud Functions (Gen 2) ã®ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•" title="Direct link to 3. ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã® Cloud Functions (Gen 2) ã®ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•">â€‹</a></h2>
<p>Cloud Functions é–¢æ•°ã«ãŠã„ã¦ã€ Pub/Sub ã‚’ãƒˆãƒªã‚¬ãƒ¼ã¨ã—ã¦ CloudEvent ã‚’ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒ–ã™ã‚‹ã“ã¨ã§å®Ÿè¡Œã§ãã‚‹ã“ã¨ã¯ã‚ã‹ã£ãŸã€‚
ã—ã‹ã—ã€ãã® é–¢æ•°ã¯ã©ã†ã‚„ã£ã¦è¨­ç½®ã€ã‚‚ã¨ã„ GCP ä¸Šã§å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã™ã‚Œã°ã„ã„ã‚“ã ï¼Ÿ</p>
<p>å½“ç„¶ã€GCP ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ãƒãƒãƒãƒã‚„ã‚Œã°ã§ãã‚‹ã¨ã—ã¦ã€ãã‚Œä»¥å¤–ã«ã¯ <strong><a href="https://cloud.google.com/functions/docs/deploy#gcloud" target="_blank" rel="noopener noreferrer"><code>gcloud CLI</code> ã‚’ä½¿ã†æ–¹æ³•ãŒã‚ã‚‹</a></strong>ã€‚
ã“ã® CLI ã‚’ç”¨ã„ã¦ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹éš›ã«ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³å¼•æ•°ã¨ã—ã¦ <code>--trigger-topic</code> ãƒ•ãƒ©ã‚°ã®å€¤ã« è³¼èª­ã—ãŸã„ Pub/Sub ãƒˆãƒ”ãƒƒã‚¯ã®åå‰ã‚’æ¸¡ã—ã¦ã‚„ã‚Œã°ã‚ˆã„ã€‚</p>
<p>cf. <a href="https://cloud.google.com/functions/docs/calling/pubsub" target="_blank" rel="noopener noreferrer">Pub/Sub ãƒˆãƒªã‚¬ãƒ¼ Â |Â  Google Cloud Functions ã«é–¢ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></p>
<hr>
<p>ä»–ã«æ³¨æ„ã™ã¹ãç‚¹ã¨ã—ã¦ã€ä»¥ä¸‹ã®ä¸‰ç‚¹ãŒæŒ™ã’ã‚‰ã‚Œã‚‹ï¼š</p>
<ol>
<li><code>--entry-point</code> ãƒ•ãƒ©ã‚°ã‚’ç”¨ã„ã¦ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã‚’æŒ‡å®šã™ã‚‹</li>
<li><code>--source</code> ãƒ•ãƒ©ã‚°ã‚’ç”¨ã„ã¦æŒ‡å®šã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€æ§‹é€ ã«ã¤ã„ã¦å¿…é ˆè¦ä»¶ãŒã‚ã‚‹</li>
<li>å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç”¨ã„ã¦ã„ã‚‹å ´åˆã«ã¯ã€è¨€èªã”ã¨ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ä¾å­˜é–¢ä¿‚ã‚’æŒ‡å®šã—ã¦è§£æ±ºã™ã‚‹</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã®æŒ‡å®š">ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã®æŒ‡å®š<a href="#ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã®æŒ‡å®š" class="hash-link" aria-label="Direct link to ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã®æŒ‡å®š" title="Direct link to ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã®æŒ‡å®š">â€‹</a></h3>
<p>GCP å´ã«å¯¾ã—ã¦ã€ã©ã®é–¢æ•°ã‚’å®Ÿè¡Œã™ã‚‹ã®ã‹ã‚’æ˜ç¢ºã«ä¼ãˆã¦ã‚„ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
ãã®ãŸã‚ã«æŒ‡å®šã™ã‚‹ã®ãŒã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã§ã‚ã‚‹ã€‚</p>
<p>ä¾‹ã«ä¸Šã’ãŸ Python, Node.js ã®ä¸¡æ–¹ã¨ã‚‚ã€ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆåã¯ <code>subscribe</code> ã§ã‚ã‚‹ã€‚
<code>@functions_framework.cloud_event</code> ã‚ã‚‹ã„ã¯ <code>functions.cloudEvent</code> ã§æ¸¡ã—ã¦ã‚„ã‚‹ã“ã¨ã§ã€ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ç™»éŒ²ã•ã‚ŒãŸã“ã¨ã«ãªã‚‹ã‚‰ã—ã„ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å¿…é ˆè¦ä»¶">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å¿…é ˆè¦ä»¶<a href="#ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å¿…é ˆè¦ä»¶" class="hash-link" aria-label="Direct link to ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å¿…é ˆè¦ä»¶" title="Direct link to ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å¿…é ˆè¦  ä»¶">â€‹</a></h3>
<p><a href="https://cloud.google.com/functions/docs/writing#directory-structure" target="_blank" rel="noopener noreferrer">ã‚½ãƒ¼ã‚¹ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®æ§‹é€  | Cloud Functions ã®é–¢æ•°ã‚’ä½œæˆã™ã‚‹ | Google Cloud Functions ã«é–¢ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a> ã‚’è¦‹ã‚Œã°åˆ†ã‹ã‚‹é€šã‚Šã€<strong>å„è¨€èªãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã”ã¨ã«ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®æ§‹é€ ã«åˆ¶é™ãŒã‚ã‚‹</strong>ã€‚</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Python ã®å ´åˆ</summary><div><div class="collapsibleContent_i85q"><p>ä¾‹ãˆã° <code>Python</code> ã§ã¯ã€<code>--source</code> ã§æŒ‡å®šã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã« <code>main.py</code> ã‚’ç½®ãã€ãã®ä¸­ã«ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã‚’ç™»éŒ²ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ main.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote>
<p>Cloud Functions ã¯ã€é–¢æ•°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ«ãƒ¼ãƒˆã«ã‚ã‚‹ main.py ã¨ã„ã†åå‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚
ãƒ¡ã‚¤ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®åå‰ã¯ main.py ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
</blockquote></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Node.js ã®å ´åˆ</summary><div><div class="collapsibleContent_i85q"><p><code>Node.js</code> ã§ã¯ã€<code>--source</code> ã§æŒ‡å®šã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã« <code>package.json</code> ã¨ ãã®ä¸­ã®é …ç›® <code>main</code> ã§æŒ‡å®šã—ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆ (e.g. <em>index.js</em>) ãŒå­˜åœ¨ã—ã¦ã„ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚</p><blockquote>
<p>Node.js é–¢æ•°ã®åŸºæœ¬çš„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ package.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€Cloud Functions ã¯é–¢æ•°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ«ãƒ¼ãƒˆã«ã‚ã‚‹ <em>index.js</em> ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚½  ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚
åˆ¥ã®ãƒ¡ã‚¤ãƒ³ ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹ã«ã¯ã€package.json ãƒ•ã‚¡ã‚¤ãƒ«ã® <code>main</code> ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p>
</blockquote></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¾å­˜æ€§è§£æ±º">ä¾å­˜æ€§è§£æ±º<a href="#ä¾å­˜æ€§è§£æ±º" class="hash-link" aria-label="Direct link to ä¾å­˜æ€§è§£æ±º" title="Direct link to ä¾å­˜æ€§è§£æ±º">â€‹</a></h3>
<p>è¨€ã„æ›ãˆã‚Œã°ã€ã©ã†ã‚„ã£ã¦ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒä½¿ç”¨ã—ã¦ã„ã‚‹å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æŒ‡å®šã™ã‚‹ã‹ã¨ã„ã†å•é¡Œã§ã‚ã‚‹ã€‚</p>
<p>Python ã®å ´åˆã«ã¯ <a href="https://github.com/GoogleCloudPlatform/functions-framework-python" target="_blank" rel="noopener noreferrer"><code>functions-framework==3.*</code></a> ãŒå«ã¾ã‚ŒãŸ <em>requirements.txt</em> ã‚’ã€Node.js ã®å ´åˆã«ã¯ <code>dependencies</code> ã« <code>&quot;@google-cloud/functions-framework&quot;: &quot;^3.0.0&quot;</code> ãŒå«ã¾ã‚ŒãŸ <em>package.json</em> ã‚’ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«è¨­ç½®ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p>
<ul>
<li><a href="https://cloud.google.com/functions/docs/writing/specifying-dependencies-python" target="_blank" rel="noopener noreferrer">Python ã§ã®ä¾å­˜é–¢ä¿‚ã®æŒ‡å®š Â |Â  Google Cloud Functions ã«é–¢ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></li>
<li><a href="https://cloud.google.com/functions/docs/writing/specifying-dependencies-nodejs" target="_blank" rel="noopener noreferrer">Node.js ã§ã®ä¾å­˜é–¢ä¿‚ã®æŒ‡å®š Â |Â  Google Cloud Functions ã«é–¢ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="æœ€çµ‚çš„ãªãƒ‡ãƒ—ãƒ­ã‚¤ã‚³ãƒãƒ³ãƒ‰">æœ€çµ‚çš„ãªãƒ‡ãƒ—ãƒ­ã‚¤ã‚³ãƒãƒ³ãƒ‰<a href="#æœ€çµ‚çš„ãªãƒ‡ãƒ—ãƒ­ã‚¤ã‚³ãƒãƒ³ãƒ‰" class="hash-link" aria-label="Direct link to æœ€çµ‚çš„ãªãƒ‡ãƒ—ãƒ­ã‚¤ã‚³ãƒãƒ³ãƒ‰" title="Direct link to æœ€çµ‚çš„ãªãƒ‡ãƒ—ãƒ­ã‚¤ã‚³ãƒãƒ³ãƒ‰">â€‹</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcloud functions deploy YOUR_FUNCTION_NAME \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --gen2 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --region YOUR_REGION \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --runtime YOUR_RUNTIME \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --source YOUR_SOURCE_LOCATION \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --entry-point YOUR_CODE_ENTRYPOINT \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --trigger-topic YOUR_PUBSUB_TOPIC</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><blockquote>
<p>æœ€åˆã®å¼•æ•° YOUR_FUNCTION_NAME ã¯ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸé–¢æ•°ã®åå‰ã§ã™ã€‚</p>
<p>ç¬¬ 1 ä¸–ä»£ã®é–¢æ•°åã¯ã€<strong>å…ˆé ­ãŒè‹±æ–‡å­—ã§ã€ãã®å¾Œã«æœ€å¤§ 62 æ–‡å­—ã®è‹±æ–‡å­—ã€æ•°å­—ã€ãƒã‚¤ãƒ•ãƒ³ã€ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã§æ§‹æˆ</strong>ã—ã¾ã™ã€‚æœ«å°¾ã¯è‹±æ–‡å­—ã¾ãŸã¯æ•°å­—ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
<p>ç¬¬ 2 ä¸–ä»£ã®ãƒ«ãƒ¼ãƒ«ã‚‚åŒæ§˜ã§ã™ãŒã€<strong>æœ€åˆã®æ–‡å­—ã¯è‹±å°æ–‡å­—ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã¯ä½¿ç”¨ã§ãã¾ã›ã‚“</strong>ã€‚</p>
</blockquote></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p><code>gcloud functions deploy</code> ã«ã¯ã€ä»–ã«ã‚‚æ§˜ã€…ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³è¨­å®šã‚’æ¸¡ã™ã“ã¨ãŒã§ãã‚‹ã€‚</p><ul>
<li><code>--memory</code> ... å®Ÿè¡Œæ™‚ã®ãƒ¡ãƒ¢ãƒªã‚µã‚¤ã‚ºã‚’æŒ‡å®šã™ã‚‹<!-- -->
<ul>
<li>ã„ãã¤ã‹ã®ä¸­ã‹ã‚‰é¸ã°ãªã‘ã‚Œã°ãªã‚‰ãªã„<!-- -->
<ul>
<li>cf. <a href="https://cloud.google.com/functions/docs/configuring/memory" target="_blank" rel="noopener noreferrer">https://cloud.google.com/functions/docs/configuring/memory</a></li>
</ul>
</li>
<li>ã©ã‚Œã‚’é¸ã‚“ã ã‹ã«ã‚ˆã£ã¦ã€ã©ã®ãã‚‰ã„ <a href="https://cloud.google.com/compute/docs/cpu-platforms" target="_blank" rel="noopener noreferrer">vCPU</a> ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚‹ã‹å¤‰å‹•ã™ã‚‹</li>
</ul>
</li>
<li><code>--service-account</code> ... ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’æŒ‡å®šã™ã‚‹<!-- -->
<ul>
<li>CF é–¢æ•°ãŒä»–ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã¨é€£æºã™ã‚‹å ´åˆã€é©åˆ‡ãª IAM ã‚’ä»˜ä¸ã—ãŸã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’å‰²ã‚Šå½“ã¦ã‚‹å¿…è¦ãŒã‚ã‚‹</li>
<li>æŒ‡å®šã—ãªã„å ´åˆã€Cloud Functions ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚‹</li>
</ul>
</li>
<li><code>--timeout</code> ... æœ€å¤§å®Ÿè¡Œæ™‚é–“ã‚’è¨­å®šã™ã‚‹<!-- -->
<ul>
<li>max ã¯ 3600s ã ãŒã€CloudEvent ã‚’ãƒˆãƒªã‚¬ãƒ¼ã¨ã™ã‚‹å ´åˆã«ã¯ 540s ã«åˆ¶é™ã•ã‚Œã‚‹ã¨ã‹</li>
</ul>
</li>
<li><code>--set-env-vars</code> ... ç’°å¢ƒå¤‰æ•°ã‚’æŒ‡å®šã™ã‚‹<!-- -->
<ul>
<li>ç§˜å¯†æƒ…å ±ã¯ <code>--set-secrets</code> ã§æ¸¡ã™ã¨ã‚ˆã„</li>
</ul>
</li>
<li><code>--update-labels</code> ... ãƒ©ãƒ™ãƒ«ã‚’ä»˜ä¸ã™ã‚‹<!-- -->
<ul>
<li>å¤šæ•°ã®é–¢æ•°ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹éš›ã«ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å´ã«ãŠã„ã¦ã¯ãƒ©ãƒ™ãƒ«ã”ã¨ãƒ•ã‚£ãƒ«ã‚¿ã§ãã‚‹ã¨ä¾¿åˆ©</li>
</ul>
</li>
</ul><p>cf. <a href="https://cloud.google.com/sdk/gcloud/reference/functions/deploy" target="_blank" rel="noopener noreferrer"><code>gcloud functions deploy</code> | Google Cloud CLI Documentation</a></p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„-not-in-bigquery">4. ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ not in BigQuery<a href="#4-ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„-not-in-bigquery" class="hash-link" aria-label="Direct link to 4. ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ not in BigQuery" title="Direct link to 4. ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ not in BigQuery">â€‹</a></h2>
<p>æ™®é€šã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã ã£ãŸã‚‰ç¢ºå®Ÿã«å­˜åœ¨ã—ã¦ã„ã‚‹ã€Œãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ã€ã¨ã„ã†æ¦‚å¿µãŒ BigQuery ã«ã¯ãªã„ã€‚
ã™ãªã‚ã¡ã€Insert å‘½ä»¤ã‚’å‡ºã—ãŸã‚‰ç‰¹ã«é‡è¤‡ç­‰ã¯æ¤œè¨¼ã›ãšãã®ã¾ã¾è¿½åŠ ã—ã¦ã—ã¾ã†ã€‚</p>
<p>ã©ã†ã™ã‚Œã°é‡è¤‡ã—ãªã„ã‚ˆã†ã« BigQuery ã«èª­ã¿è¾¼ã‚€ã“ã¨ãŒã§ãã‚‹ã ã‚ã†ã‹ï¼Ÿ</p>
<p>çµè«–ã‚’è¨€ãˆã°ã€ä»¥ä¸‹ã®äºŒç‚¹ã®å·¥å¤«ã‚’å‡ã‚‰ã›ã°å®Ÿç¾ã§ããŸï¼š</p>
<ol>
<li>GCS å´ã«ã‚¢ãƒƒ  ãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹éš›ã«ã€Œæ–°è¦ä½œæˆã€ã ã‘ã‚’è¨±å¯ã—ã¦ã€Œæ›´æ–°ã€ã‚’æ‹’å¦ã™ã‚‹</li>
<li>ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨ã«å›ºæœ‰ã® ID ã‚’æŒ¯ã‚Šåˆ†ã‘ã€ãƒ‡ãƒ¼ã‚¿ã«ã‚‚å†ªç­‰æ€§ã‚’ç¢ºä¿ã™ã‚‹</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rerational-db-ã‚’ä½¿ã†">Rerational DB ã‚’ä½¿ã†<a href="#rerational-db-ã‚’ä½¿ã†" class="hash-link" aria-label="Direct link to Rerational DB ã‚’ä½¿ã†" title="Direct link to Rerational DB ã‚’ä½¿ã†">â€‹</a></h3>
<p>æœ¬æ¥ã§ã‚ã‚Œã°ã€æŠ½å‡ºã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ãã®ã¾ã¾ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã®ã§ã¯ãªãã€ä¸€æ—¦ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ« DB ã«çªã£è¾¼ã‚“ã§ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ã‚’ä»˜ã‘ã¦ã‹ã‚‰èª­ã¿å‡ºã™æ–¹æ³•ãŒä¸€èˆ¬çš„ã ã‚ã†ã€‚
ä¼æ¥­ã§æŒã£ã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã‹ã‹ã‚‰ BigQuery ã«å…¥ã‚ŒãŸã„ã¨ã„ã†ã¨ããªã©ã¯ãœã²ã¨ã‚‚ãã®ã‚ˆã†ã«ã™ã¹ãã ã€‚</p>
<p>ã‚‚ã¡ã‚ã‚“ãã®ã‚ˆã†ã«ã—ãŸã¨ã—ã¦ã‚‚ã€ãã®æ“ä½œã‚’è¤‡æ•°å›è¡Œãªã£ã¦ã—ã¾ã†ã¨å…ƒã‚‚å­ã‚‚ãªã„ãŸã‚ã€ã‚ã‚‹ç¨‹åº¦ã®å¯¾ç­–ã‚’å¯ã‚‹å¿…è¦ã¯ã‚ã‚‹ã‚‰ã—ã„ã€‚</p>
<p>cf. <a href="https://techblog.zozo.com/entry/idempotent-data-insert-in-bigquery" target="_blank" rel="noopener noreferrer">BigQuery ã§ã®ãƒ‡ãƒ¼ã‚¿è¿½è¨˜å‡¦ç†ã«ãŠã‘ã‚‹å†ªç­‰åŒ–ã®å–ã‚Šçµ„ã¿ - ZOZO TECH BLOG</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å·¥å¤«ã—ã¦ãªã‚“ã¨ã‹ã™ã‚‹">å·¥å¤«ã—ã¦ãªã‚“ã¨ã‹ã™ã‚‹<a href="#å·¥å¤«ã—ã¦ãªã‚“ã¨ã‹ã™ã‚‹" class="hash-link" aria-label="Direct link to å·¥å¤«ã—ã¦ãªã‚“ã¨ã‹ã™ã‚‹" title="Direct link to å·¥å¤«ã—ã¦ãªã‚“ã¨ã‹ã™ã‚‹">â€‹</a></h3>
<p>ã§ã€ML4Keiba ã«ãŠã„ã¦ã¯ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ« DB ã¯å­˜åœ¨ã—ãªã„ã€‚
ã‹ã¨ã„ã£ã¦æ–°ãŸã« Cloud SQL ã¨ã‹å¥‘ç´„ã™ã‚‹ã®ã‚‚ã€ç„¡é§„ãªã‚³ã‚¹ãƒˆãŒåµ©ã‚€ã‚ˆã†ã§å«Œã ã€‚
å®Ÿéš›ã«ã‚µãƒ¼ãƒ“ã‚¹ã‚¤ãƒ³ã§ãã‚‹ç›®å‡¦ãŒç«‹ã£ãŸã¨ã‹ãªã‚‰ã¾ã ã—ã‚‚ã€ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ã‚’ç¢ºä¿ã—ãŸã„ã¨ã„ã†ã ã‘ã§ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã‚³ã‚¹ãƒˆã‚’å¢—ã‚„ã™ã®ã¯ã€ã©ã†ã«ã‹ã—ã¦å›é¿ã—ãŸã„ã€‚</p>
<p>ä¸€ã¤ã¯ã€ã€Œå†ªç­‰æ€§ã®ç¢ºä¿ã€ã‚’è€ƒãˆãŸã€‚
ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨ã«å€‹åˆ¥ã® ID ã§ ç®¡ç†ã—ã€GCS ã«çªã£è¾¼ã‚€éš›ã«ã€Œæ–°è¦ä½œæˆã¯è¨±ã™ã‘ã©æ›´æ–°ã¯æ‹’å¦ã™ã‚‹ã€ã¨ã„ã†å‡¦ç†ãŒå®Ÿç¾ã§ãã‚Œã°ã€å¸¸ã«ç‹¬ç«‹ã—ãŸãƒ‡ãƒ¼ã‚¿ã ã‘ãŒè“„ç©ã•ã‚Œã¦ã„ãã“ã¨ã«ãªã‚‹ã€‚
ã“ã†ã™ã‚Œã° BigQuery ã¸ã® load ã«ã¯ã€<a href="https://cloud.google.com/functions/docs/calling/storage" target="_blank" rel="noopener noreferrer">GCS ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒŠãƒ©ã‚¤ã‚ºãƒˆãƒªã‚¬ãƒ¼</a>ã‚’ä½¿ãˆã°ã‚ˆã„ã ã‘ã¨ãªã‚‹ã€‚</p>
<hr>
<p>ã˜ã‚ƒã‚ã€ã“ã®å€‹åˆ¥ã® ID ã¨ã¯ãªã‚“ãã‚„ï¼Ÿã¨ã„ã†éƒ¨åˆ†ã‚’è€ƒãˆã‚‹ã ã‘ãªã®ã ãŒã€ã“ã“ã¯å¹¸ã„ã‚‚ã¨ã‹ã‚‰ã†ã¾ã„ã“ã¨è¨­è¨ˆã•ã‚Œã¦ã„ãŸã€‚</p>
<p>ãƒ‡ãƒ¼ã‚¿ã‚’å–ã£ã¦ãã‚‹éš›ã«ã€ãƒ¬ãƒ¼ã‚¹æƒ…å ±ã¯æ—¥ä»˜ <code>YYYYMMDD</code> ã‚’ã‚·ãƒ¼ãƒ‰å€¤ã¨ã—ã¦ã„ãŸãŸã‚ã€ã“ã‚Œã‚’ãã®ã¾ã¾ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã«è»¢ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®é‡è¤‡ã‚’é˜²ãã“ã¨ãŒã§ããŸã€‚
ãƒ¬ãƒ¼ã‚¹ã®æƒ…å ±ä»¥å¤–ã«ã¯é¦¬è‡ªèº«ã®æƒ…å ±ï¼ˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ï¼‰ãŒå¿…è¦ã¨ãªã‚‹ãŒã€ãã¡ã‚‰ã¯é¦¬ã”ã¨ã«å›ºæœ‰ã® ID (<code>horse_id</code>)ã§ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>é¦¬ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã«ã¯ã€èª¿æ•™å¸«ã‚„ã‚ªãƒ¼ãƒŠãƒ¼ã€ç²å¾—è³é‡‘ã€é€šç®—æˆç¸¾ãªã©ãŒãƒšãƒ¼ã‚¸ã«ã¯å«ã¾ã‚Œã¦ã„ã‚‹ã€‚
ã“ã‚Œã‚‰ã®æƒ…å ±ã¯<strong>æ›´æ–°å¯èƒ½æ€§ãŒã‚ã‚‹</strong>ãƒ‡ãƒ¼ã‚¿ãªã®ã§å†ªç­‰ã§ã¯ãªã„â€¦ã®ã ãŒã€å®Ÿéš›å•é¡Œã»ã¨ã‚“ã©å¤‰åŒ–ã—ãªã„ã‚‚ã®ã¨è€ƒãˆã¦ã‚ˆã„ã ã‚ã†ã€‚</p><p>å¹¸ã„ã€ï¼‘ï¼ä¸‡ã»ã©ã®é¦¬æƒ…å ±ã‚’åé›†ã—ã¦ã‚‚ãã‚Œã»ã©å¤§ããªãƒ‡ãƒ¼ã‚¿ã«ã¯ãªã‚‰ãªã„ãŸã‚ã€å¹´ã«ä¸€å›ç¨‹åº¦ã®é »åº¦ã§æ›´æ–°ã§ãã‚Œã°è‰¯ã„ã¨è€ƒãˆã¦ã„ã‚‹ã€‚</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-bigquery-ã¯ã‚´ãƒŸç®±ã˜ã‚ƒãªã„">5. BigQuery ã¯ã‚´ãƒŸç®±ã˜ã‚ƒãªã„<a href="#5-bigquery-ã¯ã‚´ãƒŸç®±ã˜ã‚ƒãªã„" class="hash-link" aria-label="Direct link to 5. BigQuery ã¯ã‚´ãƒŸç®±ã˜ã‚ƒãªã„" title="Direct link to 5. BigQuery ã¯ã‚´ãƒŸç®±ã˜ã‚ƒãªã„">â€‹</a></h2>
<p>GIGO: Garbage In, Garbage Out ã¨ã„ã†è¨€è‘‰ã‚‚ã‚ã‚‹é€šã‚Šã€ã‚´ãƒŸãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ãŸã¨ã“ã‚ã§ã‚´ãƒŸã—ã‹å¾—ã‚‰ã‚Œãªã„â€¦â€¦ã®ã ãŒã€ãã‚Œä»¥å‰ã®å•é¡Œã¨ã—ã¦<strong>ã‚¹ã‚­ãƒ¼ãƒã‚’ãã¡ã‚“ã¨å®šç¾©ã—ãªã„ã¨ BigQuery ã«ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã‚‚ã§ããªã„</strong>ã¨ã„ã†çŠ¶æ³ã«ç›´é¢ã—ãŸã€‚
ã¨ã„ã†ã®ã‚‚ã€ãƒ­ãƒ¼ãƒ‰ã™ã‚‹éš›ã«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦ <code>autodetect</code> ã‚’æŒ‡å®šã—ã¦ã„ãŸã“ã¨ãŒåŸå› ã ã€‚</p>
<p>ä¾‹ãˆã°å¤§ããªãƒ‡ãƒ¼ã‚¿ã‚’è¤‡æ•°å€‹åŒæ™‚ã«èª­ã¿è¾¼ã¾ã›ã‚‹ãªã‚‰å•é¡Œã¯èµ·ã“ã‚Šã«ãã„ã€‚
ä¸€ç®‡æ‰€ã§ã¯æ•´æ•°å‹ã£ã½ã„ãŒã€ä»–æ–¹ã§ã¯æ–‡å­—åˆ—å‹ã£ã½ã„ã¨ã„ã†çŠ¶æ…‹ã‚’å«ã‚€ã ã‚ã†ã‹ã‚‰ã ã€‚
ã—ã‹ã—ã€å°ã•ãªãƒ‡ãƒ¼ã‚¿ã‚’ä¸€ã¤ãšã¤å°‘ã—ãšã¤å…¥ã‚Œã¦ã„ãå ´åˆã€æœ€åˆã«å…¥ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãŒåˆè¦‹ã§ã¯æ•´æ•°å‹ã«è¦‹ãˆã‚‹ãŒå®Ÿã¯æ–‡å­—åˆ—å‹ã§ã—ãŸï¼ãªã‚“ã¦ã“ã¨ãŒã‚¶ãƒ©ã«èµ·ãã‚‹ã€‚ã‚‚ã¡ã‚ã‚“å‹ãŒç•°ãªã‚Œã°ã€ã†ã¾ãèª­ã¿è¾¼ã‚ãšã‚¨ãƒ©ãƒ¼ãŒèµ·ãã‚‹ã€‚</p>
<p>ã“ã†ãªã‚‰ãªã„ãŸã‚ã«ã¯ã€ãã¡ã‚“ã¨æ‰‹å‹•ã§å‹ã‚’å®šç¾©ã™ã‚‹ã€ã‚‚ã¨ã„ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã—ã¦ã‚„ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
ã“ã‚ŒãŒã¤ã‚‰ã„â€¦â€¦</p>
<p>CSV ãªã‚‰ã€ãƒ˜ãƒƒãƒ€ãƒ¼ã«å«ã¾ã‚Œã‚‹ã‚«ãƒ©ãƒ æ•°ã®åˆ†ã ã‘ä¸€å¯¾ä¸€å¯¾å¿œã™ã‚‹ã‚¹ã‚­ãƒ¼ãƒã‚’æ›¸ã‹ã­ã°ãªã‚‰ãªã„ã€‚
ãƒ†ãƒ¼ãƒ–ãƒ«ãŒä¸€ã¤äºŒã¤ãªã‚‰ã¾ã ã—ã‚‚ã€åã‚ˆã‚Šå¤šããªã‚‹ã¨æ‚²æƒ¨ã§ã‚ã‚‹ã€‚</p>
<p>ãã‚Œã§ã‚‚ã€ãã¡ã‚“ã¨èª­ã¿è¾¼ã¾ã›ã‚‹ã«ã¯è‡ªåˆ†ã§åœ°é“ã«ã‚¹ã‚­ãƒ¼ãƒã‚’æ›¸ãã“ã¨ãŒå¿…è¦ã ã€‚
å¿ƒã‚’ç„¡ã«ã—ã¦ã€ç›®ã®å‰ã®ãƒ‡ãƒ¼ã‚¿å‹å®šç¾©ã‚’é€²ã‚ã‚ˆã†ã€‚ã€‚ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç·æ‹¬">ç·æ‹¬<a href="#ç·æ‹¬" class="hash-link" aria-label="Direct link to ç·æ‹¬" title="Direct link to ç·æ‹¬">â€‹</a></h2>
<p>æ–™é‡‘ã®å†…è¨³ã¯ï½ãŠãŠã‚ˆãä»¥ä¸‹ã®é€šã‚Šï¼š</p>
<ul>
<li>Cloud Scheduler ... Â¥0</li>
<li>Cloud Pub/Sub ... Â¥0</li>
<li>Cloud Storage ... Â¥100</li>
<li>Cloud Functions ... Â¥900</li>
<li>BigQuery ... Â¥0</li>
</ul>
<p>Cloud Functions ã‚’èª­ã‚“ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ã¾ãã£ãŸã‹ã‚‰çµæ§‹è¡Œãã‹ãªã€œã¨æ€ã£ã¦ã„ãŸã‚‰ 1000 å††ãã“ã‚‰ã§åã¾ã£ã¦ã—ã¾ã£ãŸã€‚
ã‚ã¾ã‚Šã«ã‚‚æ¿€å®‰ã§å¿ƒé…ã«ãªã‚‹ãƒ¬ãƒ™ãƒ«ã§ã‚ã‚‹ã€‚</p>
<p>ã¡ãªã¿ã«ã“ã‚Œã¯ã‚¤ãƒ‹ã‚·ãƒ£ãƒ«ã‚³ã‚¹ãƒˆã¨ã„ã†ã ã‘ã§ã€ä»Šå¾Œã¯ GCS ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æ–™é‡‘ãŒå›ºå®šã§ Â¥100 - Â¥200 ãã‚‰ã„ã¨ã€BigQuery ã§ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã—å¾—ã‚‰ã‚ŒãŸãƒ‡ãƒ¼ã‚¿åˆ†ã ã‘ã¨ãªã‚‹ã€‚
BigQuery ã«èª²é‡‘ã•ã‚Œã‚‹ãã‚‰ã„ãƒ‡ãƒ¼ã‚¿åˆ†æã‚’é‡ã­ãŸã„ã‚‚ã®ã§ã‚ã‚‹ãªãâ€¦â€¦</p>
<p>ã‚µãƒ¼ãƒ“ã‚¹äº‘ã€…ã«ã¤ã„ã¦ã¯ã€ã¾ã å®Ÿéš›ã«ã‚„ã‚‹ã‹ã©ã†ã‹ã¯æ±ºã‚ã¦ã„ãªã„ã€‚
ã¨ã„ã†ã‹ãƒ‡ãƒ¼ã‚¿åˆ†æã‚’ã‚„ã£ã¦ã„ã„æ„Ÿã˜ã®æˆç¸¾ãŒå‡ºã›ã‚‹ã‹ã©ã†ã‹ã‚‚ã¾ã ã‚ã‹ã‚‰ãªã„ã€‚
ã‚‚ã—å‡ºã›ãã†ãªã‚‰ã€ãã‚Œã‚’å£²ã‚Šã«ã—ãŸãƒ‡ãƒ¼ã‚¿æä¾›ã‚µã‚¤ãƒˆã§ã‚‚ã¤ãã‚‹ã‹ãªâ€¦â€¦</p>
<p>ãã‚Œã‚ˆã‚Šå®Ÿç¾æ€§ãŒé«˜ã„æ¡ˆã¨ã—ã¦ã€ä¾‹ãˆã°<a href="https://zenn.dev/kun432/articles/visualize-keiba-corner-pandas-plotly" target="_blank" rel="noopener noreferrer">pyparsing ã§ç«¶é¦¬ã®ã‚³ãƒ¼ãƒŠãƒ¼é€šéé †ä½ã‚’ãƒ‘ãƒ¼ã‚¹ â†’Plotly ã§å¯è¦–åŒ–</a>ã§ãã‚‹ãã†ãªã®ã§ã€ãã†ã„ã†éå»æƒ…å ±ã¨ã‹ã‚’é¦¬ã”ã¨ã€ãƒ¬ãƒ¼ã‚¹ã”ã¨ã«æä¾›ã§ãã‚‹ã¨é¢ç™½ãã†ã ã€‚
å‡ºèµ°é¦¬æƒ…å ±ã«ã¤ã„ã¦ã¯ä¸€æ—¥å‰ã«å–å¾—ã§ãã‚‹ã‹ã‚‰ã€ãã®é¦¬ã®æ•°ãŒãŠãŠã‚ˆã 12 é ­ * 12 R * 3 ä¼šå ´ ã§ 450 ãã‚‰ã„ã¨ãªã‚‹ã€‚
ãã®ãã‚‰ã„ãªã‚‰ã€GitHub Pages ã§ã©ã†ã«ã‹é™çš„ãƒšãƒ¼ã‚¸ã«è½ã¨ã—è¾¼ã‚ãã†ã ã¨æ€ã†ã€‚
ãœã²ã‚„ã‚Šã¦ã‡ãªâ€¦â€¦â€¦</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_Wr5y"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/python">python</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/ç«¶é¦¬">ç«¶é¦¬</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/gcs">GCS</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/dwh">DWH</a></li></ul></div><div class="col col--12"><div class="row"><div class="col col--8 margin-vert--sm"><div class="SocialButtons_nedk"><button aria-label="facebook" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer;outline:none"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#3b5998"></circle><path d="M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z" fill="white"></path></svg></button><button aria-label="twitter" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer;outline:none"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#000000"></circle><path d="M 41.116 18.375 h 4.962 l -10.8405 12.39 l 12.753 16.86 H 38.005 l -7.821 -10.2255 L 21.235 47.625 H 16.27 l 11.595 -13.2525 L 15.631 18.375 H 25.87 l 7.0695 9.3465 z m -1.7415 26.28 h 2.7495 L 24.376 21.189 H 21.4255 z" fill="white"></path></svg></button><button aria-label="line" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer;outline:none"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#00b800"></circle><path d="M52.62 30.138c0 3.693-1.432 7.019-4.42 10.296h.001c-4.326 4.979-14 11.044-16.201 11.972-2.2.927-1.876-.591-1.786-1.112l.294-1.765c.069-.527.142-1.343-.066-1.865-.232-.574-1.146-.872-1.817-1.016-9.909-1.31-17.245-8.238-17.245-16.51 0-9.226 9.251-16.733 20.62-16.733 11.37 0 20.62 7.507 20.62 16.733zM27.81 25.68h-1.446a.402.402 0 0 0-.402.401v8.985c0 .221.18.4.402.4h1.446a.401.401 0 0 0 .402-.4v-8.985a.402.402 0 0 0-.402-.401zm9.956 0H36.32a.402.402 0 0 0-.402.401v5.338L31.8 25.858a.39.39 0 0 0-.031-.04l-.002-.003-.024-.025-.008-.007a.313.313 0 0 0-.032-.026.255.255 0 0 1-.021-.014l-.012-.007-.021-.012-.013-.006-.023-.01-.013-.005-.024-.008-.014-.003-.023-.005-.017-.002-.021-.003-.021-.002h-1.46a.402.402 0 0 0-.402.401v8.985c0 .221.18.4.402.4h1.446a.401.401 0 0 0 .402-.4v-5.337l4.123 5.568c.028.04.063.072.101.099l.004.003a.236.236 0 0 0 .025.015l.012.006.019.01a.154.154 0 0 1 .019.008l.012.004.028.01.005.001a.442.442 0 0 0 .104.013h1.446a.4.4 0 0 0 .401-.4v-8.985a.402.402 0 0 0-.401-.401zm-13.442 7.537h-3.93v-7.136a.401.401 0 0 0-.401-.401h-1.447a.4.4 0 0 0-.401.401v8.984a.392.392 0 0 0 .123.29c.072.068.17.111.278.111h5.778a.4.4 0 0 0 .401-.401v-1.447a.401.401 0 0 0-.401-.401zm21.429-5.287c.222 0 .401-.18.401-.402v-1.446a.401.401 0 0 0-.401-.402h-5.778a.398.398 0 0 0-.279.113l-.005.004-.006.008a.397.397 0 0 0-.111.276v8.984c0 .108.043.206.112.278l.005.006a.401.401 0 0 0 .284.117h5.778a.4.4 0 0 0 .401-.401v-1.447a.401.401 0 0 0-.401-.401h-3.93v-1.519h3.93c.222 0 .401-.18.401-.402V29.85a.401.401 0 0 0-.401-.402h-3.93V27.93h3.93z" fill="white"></path></svg></button><button aria-label="weibo" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer;outline:none"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#CD201F"></circle><path d="M40.9756152,15.0217119 C40.5000732,15.0546301 39.9999314,15.1204666 39.5325878,15.2192213 C38.6634928,15.4085016 38.0977589,16.2643757 38.2863368,17.1284787 C38.4667163,18.0008129 39.3194143,18.5686519 40.1885094,18.3793715 C42.8613908,17.8115326 45.7720411,18.6427174 47.7316073,20.8153207 C49.6911735,22.996153 50.2077122,25.975254 49.3714112,28.5840234 C49.1008441,29.4316684 49.5763861,30.3533789 50.4208857,30.6249537 C51.2653852,30.8965286 52.1754769,30.4192153 52.4542425,29.5715703 C53.6349013,25.9011885 52.9133876,21.7699494 50.1585171,18.7085538 C48.0923641,16.4042776 45.2063093,15.1533848 42.3530505,15.0217119 C41.8775084,14.9970227 41.4511594,14.9887937 40.9756152,15.0217119 Z M27.9227762,19.8277737 C24.9957268,20.140498 20.863421,22.4365431 17.2312548,26.0822378 C13.2711279,30.0571148 11,34.2871065 11,37.9328012 C11,44.9032373 19.8713401,49.125 28.5786978,49.125 C39.9917329,49.125 47.600423,42.4261409 47.600423,37.1427636 C47.600423,33.9496952 44.9603397,32.1638816 42.549827,31.4149913 C41.9594976,31.2339421 41.5167516,31.1434164 41.8283133,30.3616079 C42.5006339,28.66632 42.6236176,27.1932286 41.8939054,26.1480742 C40.5328692,24.1894405 36.7203236,24.2881952 32.448635,26.0822378 C32.448635,26.0822378 31.1203949,26.6912261 31.4647526,25.6213825 C32.1206742,23.4981576 32.0304845,21.712342 31.0056075,20.6836478 C30.2840938,19.9512176 29.2510184,19.6878718 27.9227762,19.8277737 Z M42.0906819,20.6836478 C41.6233383,20.6589586 41.1723917,20.716566 40.7132466,20.8153207 C39.9671353,20.9716828 39.4997917,21.7781784 39.6637721,22.5270687 C39.8277525,23.275959 40.5574647,23.7450433 41.303576,23.5804521 C42.1972686,23.3911718 43.2057485,23.6380596 43.8616701,24.3704897 C44.5175916,25.1029198 44.6733735,26.0657797 44.3864073,26.9381118 C44.1486363,27.6705419 44.5093932,28.4770397 45.2391054,28.7156963 C45.9688176,28.9461239 46.780521,28.5922524 47.0100936,27.8598223 C47.584026,26.0740087 47.2396661,24.0248493 45.8950269,22.5270687 C44.886547,21.4078489 43.4845162,20.7494842 42.0906819,20.6836478 Z M29.496988,29.9665891 C35.3100922,30.1723275 39.9917329,33.0691319 40.3852858,37.0769272 C40.8362324,41.6607904 35.5970585,45.9319315 28.6442899,46.6232144 C21.6915214,47.3144973 15.6488446,44.154347 15.197898,39.5787128 C14.7469514,34.9948495 20.059916,30.7237084 27.004486,30.0324256 C27.8735831,29.950131 28.6688875,29.9336709 29.496988,29.9665891 Z M25.5614586,34.3776322 C23.183744,34.5916017 20.9372116,35.9577073 19.9205332,37.9328012 C18.5348994,40.6238672 19.9041362,43.6029661 23.0689567,44.582284 C26.340366,45.5945202 30.1857056,44.0638213 31.5303448,41.1587879 C32.8503864,38.3195909 31.1613894,35.3734082 27.9227762,34.5751416 C27.1438688,34.3776322 26.356763,34.3035667 25.5614586,34.3776322 Z M24.052839,38.7228388 C24.3316067,38.7310678 24.5857748,38.8215935 24.8399449,38.9203482 C25.8648218,39.3400561 26.1845841,40.4428158 25.5614586,41.4221338 C24.9219361,42.3932227 23.5690963,42.8623069 22.5442194,42.4096807 C21.5357395,41.9652856 21.2487754,40.8542948 21.8882979,39.9078951 C22.3638421,39.2001542 23.2247386,38.7146097 24.052839,38.7228388 Z" fill="white"></path></svg></button><button aria-label="pocket" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer;outline:none"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#EF3F56"></circle><path d="M41.084 29.065l-7.528 7.882a2.104 2.104 0 0 1-1.521.666 2.106 2.106 0 0 1-1.522-.666l-7.528-7.882c-.876-.914-.902-2.43-.065-3.384.84-.955 2.228-.987 3.1-.072l6.015 6.286 6.022-6.286c.88-.918 2.263-.883 3.102.071.841.938.82 2.465-.06 3.383l-.015.002zm6.777-10.976C47.463 16.84 46.361 16 45.14 16H18.905c-1.2 0-2.289.82-2.716 2.044-.125.363-.189.743-.189 1.125v10.539l.112 2.096c.464 4.766 2.73 8.933 6.243 11.838.06.053.125.102.19.153l.04.033c1.882 1.499 3.986 2.514 6.259 3.014a14.662 14.662 0 0 0 6.13.052c.118-.042.235-.065.353-.087.03 0 .065-.022.098-.042a15.395 15.395 0 0 0 6.011-2.945l.039-.045.18-.153c3.502-2.902 5.765-7.072 6.248-11.852L48 29.674v-10.52c0-.366-.041-.728-.161-1.08l.022.015z" fill="white"></path></svg></button><button aria-label="hatena" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer;outline:none"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#009ad9"></circle><path d="M 36.164062 33.554688 C 34.988281 32.234375 33.347656 31.5 31.253906 31.34375 C 33.125 30.835938 34.476562 30.09375 35.335938 29.09375 C 36.191406 28.09375 36.609375 26.78125 36.609375 25.101562 C 36.628906 23.875 36.332031 22.660156 35.75 21.578125 C 35.160156 20.558594 34.292969 19.71875 33.253906 19.160156 C 32.304688 18.640625 31.175781 18.265625 29.847656 18.042969 C 28.523438 17.824219 26.195312 17.730469 22.867188 17.730469 L 14.769531 17.730469 L 14.769531 47.269531 L 23.113281 47.269531 C 26.46875 47.269531 28.886719 47.15625 30.367188 46.929688 C 31.851562 46.695312 33.085938 46.304688 34.085938 45.773438 C 35.289062 45.148438 36.28125 44.179688 36.933594 42.992188 C 37.597656 41.796875 37.933594 40.402344 37.933594 38.816406 C 37.933594 36.621094 37.347656 34.867188 36.164062 33.554688 Z M 22.257812 24.269531 L 23.984375 24.269531 C 25.988281 24.269531 27.332031 24.496094 28.015625 24.945312 C 28.703125 25.402344 29.042969 26.183594 29.042969 27.285156 C 29.042969 28.390625 28.664062 29.105469 27.9375 29.550781 C 27.210938 29.992188 25.84375 30.199219 23.855469 30.199219 L 22.257812 30.199219 Z M 29.121094 41.210938 C 28.328125 41.691406 26.976562 41.925781 25.078125 41.925781 L 22.257812 41.925781 L 22.257812 35.488281 L 25.195312 35.488281 C 27.144531 35.488281 28.496094 35.738281 29.210938 36.230469 C 29.925781 36.726562 30.304688 37.582031 30.304688 38.832031 C 30.304688 40.078125 29.914062 40.742188 29.105469 41.222656 Z M 29.121094 41.210938 M 46.488281 39.792969 C 44.421875 39.792969 42.742188 41.46875 42.742188 43.535156 C 42.742188 45.605469 44.421875 47.28125 46.488281 47.28125 C 48.554688 47.28125 50.230469 45.605469 50.230469 43.535156 C 50.230469 41.46875 48.554688 39.792969 46.488281 39.792969 Z M 46.488281 39.792969 M 43.238281 17.730469 L 49.738281 17.730469 L 49.738281 37.429688 L 43.238281 37.429688 Z M 43.238281 17.730469 " fill="white"></path></svg></button><button aria-label="reddit" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer;outline:none"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#ff4500"></circle><path d="m 52.8165,31.942362 c 0,-2.4803 -2.0264,-4.4965 -4.5169,-4.4965 -1.2155,0 -2.3171,0.4862 -3.128,1.2682 -3.077,-2.0247 -7.2403,-3.3133 -11.8507,-3.4782 l 2.5211,-7.9373 6.8272,1.5997 -0.0102,0.0986 c 0,2.0281 1.6575,3.6771 3.6958,3.6771 2.0366,0 3.6924,-1.649 3.6924,-3.6771 0,-2.0281 -1.6575,-3.6788 -3.6924,-3.6788 -1.564,0 -2.8968,0.9758 -3.4357,2.3443 l -7.3593,-1.7255 c -0.3213,-0.0782 -0.6477,0.1071 -0.748,0.4233 L 32,25.212062 c -4.8246,0.0578 -9.1953,1.3566 -12.41,3.4425 -0.8058,-0.7446 -1.8751,-1.2104 -3.0583,-1.2104 -2.4905,0 -4.5152,2.0179 -4.5152,4.4982 0,1.649 0.9061,3.0787 2.2389,3.8607 -0.0884,0.4794 -0.1462,0.9639 -0.1462,1.4569 0,6.6487 8.1736,12.0581 18.2223,12.0581 10.0487,0 18.224,-5.4094 18.224,-12.0581 0,-0.4658 -0.0493,-0.9248 -0.1275,-1.377 1.4144,-0.7599 2.3885,-2.2304 2.3885,-3.9406 z m -29.2808,3.0872 c 0,-1.4756 1.207,-2.6775 2.6894,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 -1.4824,0 -2.6894,-1.2002 -2.6894,-2.6758 z m 15.4037,7.9373 c -1.3549,1.3481 -3.4816,2.0043 -6.5008,2.0043 l -0.0221,-0.0051 -0.0221,0.0051 c -3.0209,0 -5.1476,-0.6562 -6.5008,-2.0043 -0.2465,-0.2448 -0.2465,-0.6443 0,-0.8891 0.2465,-0.2465 0.6477,-0.2465 0.8942,0 1.105,1.0999 2.9393,1.6337 5.6066,1.6337 l 0.0221,0.0051 0.0221,-0.0051 c 2.6673,0 4.5016,-0.5355 5.6066,-1.6354 0.2465,-0.2465 0.6477,-0.2448 0.8942,0 0.2465,0.2465 0.2465,0.6443 0,0.8908 z m -0.3213,-5.2615 c -1.4824,0 -2.6877,-1.2002 -2.6877,-2.6758 0,-1.4756 1.2053,-2.6775 2.6877,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 z" fill="white"></path></svg></button><button aria-label="telegram" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer;outline:none"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#37aee2"></circle><path d="m45.90873,15.44335c-0.6901,-0.0281 -1.37668,0.14048 -1.96142,0.41265c-0.84989,0.32661 -8.63939,3.33986 -16.5237,6.39174c-3.9685,1.53296 -7.93349,3.06593 -10.98537,4.24067c-3.05012,1.1765 -5.34694,2.05098 -5.4681,2.09312c-0.80775,0.28096 -1.89996,0.63566 -2.82712,1.72788c-0.23354,0.27218 -0.46884,0.62161 -0.58825,1.10275c-0.11941,0.48114 -0.06673,1.09222 0.16682,1.5716c0.46533,0.96052 1.25376,1.35737 2.18443,1.71383c3.09051,0.99037 6.28638,1.93508 8.93263,2.8236c0.97632,3.44171 1.91401,6.89571 2.84116,10.34268c0.30554,0.69185 0.97105,0.94823 1.65764,0.95525l-0.00351,0.03512c0,0 0.53908,0.05268 1.06412,-0.07375c0.52679,-0.12292 1.18879,-0.42846 1.79109,-0.99212c0.662,-0.62161 2.45836,-2.38812 3.47683,-3.38552l7.6736,5.66477l0.06146,0.03512c0,0 0.84989,0.59703 2.09312,0.68132c0.62161,0.04214 1.4399,-0.07726 2.14229,-0.59176c0.70766,-0.51626 1.1765,-1.34683 1.396,-2.29506c0.65673,-2.86224 5.00979,-23.57745 5.75257,-27.00686l-0.02107,0.08077c0.51977,-1.93157 0.32837,-3.70159 -0.87096,-4.74991c-0.60054,-0.52152 -1.2924,-0.7498 -1.98425,-0.77965l0,0.00176zm-0.2072,3.29069c0.04741,0.0439 0.0439,0.0439 0.00351,0.04741c-0.01229,-0.00351 0.14048,0.2072 -0.15804,1.32576l-0.01229,0.04214l-0.00878,0.03863c-0.75858,3.50668 -5.15554,24.40802 -5.74203,26.96472c-0.08077,0.34417 -0.11414,0.31959 -0.09482,0.29852c-0.1756,-0.02634 -0.50045,-0.16506 -0.52679,-0.1756l-13.13468,-9.70175c4.4988,-4.33199 9.09945,-8.25307 13.744,-12.43229c0.8218,-0.41265 0.68483,-1.68573 -0.29852,-1.70681c-1.04305,0.24584 -1.92279,0.99564 -2.8798,1.47502c-5.49971,3.2626 -11.11882,6.13186 -16.55882,9.49279c-2.792,-0.97105 -5.57873,-1.77704 -8.15298,-2.57601c2.2336,-0.89555 4.00889,-1.55579 5.75608,-2.23009c3.05188,-1.1765 7.01687,-2.7042 10.98537,-4.24067c7.94051,-3.06944 15.92667,-6.16346 16.62028,-6.43037l0.05619,-0.02283l0.05268,-0.02283c0.19316,-0.0878 0.30378,-0.09658 0.35471,-0.10009c0,0 -0.01756,-0.05795 -0.00351,-0.04566l-0.00176,0zm-20.91715,22.0638l2.16687,1.60145c-0.93418,0.91311 -1.81743,1.77353 -2.45485,2.38812l0.28798,-3.98957" fill="white"></path></svg></button></div></div><div class="col col--4 margin-vert--sm"><a href="https://github.com/ningensei848/ningensei848.github.io/edit/main/content/blogs/2023/03/03.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg><wbr>ç·¨é›†ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆ</a></div></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/2023/02/07"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">netkeiba ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ LOD åŒ–ã™ã‚‹ï¼ˆ6ï¼‰</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/2023/07/05"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">å®˜åºè¨ªå• in 2023</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ç›®æ¬¡" class="table-of-contents__link toc-highlight">ç›®æ¬¡</a></li><li><a href="#1-pubsub-ã®å½¹å‰²" class="table-of-contents__link toc-highlight">1. Pub/Sub ã®å½¹å‰²</a></li><li><a href="#2-cloudevent-ã¨ã¯" class="table-of-contents__link toc-highlight">2. CloudEvent ã¨ã¯</a><ul><li><a href="#ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰" class="table-of-contents__link toc-highlight">ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰</a></li></ul></li><li><a href="#3-ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã®-cloud-functions-gen-2-ã®ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•" class="table-of-contents__link toc-highlight">3. ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã® Cloud Functions (Gen 2) ã®ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•</a><ul><li><a href="#ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã®æŒ‡å®š" class="table-of-contents__link toc-highlight">ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã®æŒ‡å®š</a></li><li><a href="#ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å¿…é ˆè¦ä»¶" class="table-of-contents__link toc-highlight">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å¿…é ˆè¦ä»¶</a></li><li><a href="#ä¾å­˜æ€§è§£æ±º" class="table-of-contents__link toc-highlight">ä¾å­˜æ€§è§£æ±º</a></li><li><a href="#æœ€çµ‚çš„ãªãƒ‡ãƒ—ãƒ­ã‚¤ã‚³ãƒãƒ³ãƒ‰" class="table-of-contents__link toc-highlight">æœ€çµ‚çš„ãªãƒ‡ãƒ—ãƒ­ã‚¤ã‚³ãƒãƒ³ãƒ‰</a></li></ul></li><li><a href="#4-ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„-not-in-bigquery" class="table-of-contents__link toc-highlight">4. ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ not in BigQuery</a><ul><li><a href="#rerational-db-ã‚’ä½¿ã†" class="table-of-contents__link toc-highlight">Rerational DB ã‚’ä½¿ã†</a></li><li><a href="#å·¥å¤«ã—ã¦ãªã‚“ã¨ã‹ã™ã‚‹" class="table-of-contents__link toc-highlight">å·¥å¤«ã—ã¦ãªã‚“ã¨ã‹ã™ã‚‹</a></li></ul></li><li><a href="#5-bigquery-ã¯ã‚´ãƒŸç®±ã˜ã‚ƒãªã„" class="table-of-contents__link toc-highlight">5. BigQuery ã¯ã‚´ãƒŸç®±ã˜ã‚ƒãªã„</a></li><li><a href="#ç·æ‹¬" class="table-of-contents__link toc-highlight">ç·æ‹¬</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/logo.svg" alt="Kiai de Nantoka" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo_dark.svg" alt="Kiai de Nantoka" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></div><div class="footer__copyright">Copyright Â© 2024 ningensei848, Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>