---
id: '2022-01-17'
title: 'Next.js ã¨ã®å‘ãåˆã„ï¼ˆ2022/01/17ï¼‰'
emoji: 'ğŸ™ˆ' # ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒã¨ã—ã¦ä½¿ã‚ã‚Œã‚‹çµµæ–‡å­—ï¼ˆ1æ–‡å­—ã ã‘ï¼‰
type: 'diary' # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢è¨˜äº‹
topics: ['nextjs'] # ã‚¿ã‚°ï¼["markdown", "rust", "aws"]ã®ã‚ˆã†ã«æŒ‡å®šã™ã‚‹
published: true # å…¬é–‹è¨­å®šï¼ˆfalseã«ã™ã‚‹ã¨ä¸‹æ›¸ãï¼‰
---

# next/dynamic ã§ named import ã—ãŸã¨ãã«ã‚¨ãƒ©ãƒ¼

[ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://nextjs.org/docs/advanced-features/dynamic-import#with-named-exports)é€šã‚Šã«å®Ÿè£…ã—ã¦ã„ã‚‹ã®ã«ï¼Œ TypeScript ãã‚“ã¯ãªãœã‹è¨±ã—ã¦ãã‚Œãªã„ï¼

> ```js
> import dynamic from 'next/dynamic'
>
> const DynamicComponent = dynamic(() => import('../components/hello').then((mod) => mod.Hello)) // ã“ã“ã§ä¸‹è¨˜ã®ã‚¨ãƒ©ãƒ¼ãŒèµ·ã“ã‚‹
> function Home() {
>   return (
>     <div>
>       <Header />
>       <DynamicComponent />
>       <p>HOME PAGE is here!</p>
>     </div>
>   )
> }
>
> export default Home
> ```

```schell
Argument of type '() => Promise<ComponentClass<never, any> | FunctionComponent<never> | { default: ComponentType<never>; } | ((props: PageProps) => JSX.Element)>' is not assignable to parameter of type 'DynamicOptions<{}> | (() => LoaderComponent<{}>) | LoaderComponent<{}>'.
Type '() => Promise<ComponentClass<never, any> | FunctionComponent<never> | { default: ComponentType<never>; } | ((props: PageProps) => JSX.Element)>' is not assignable to type '() => LoaderComponent<{}>'.
Type 'Promise<ComponentClass<never, any> | FunctionComponent<never> | { default: ComponentType<never>; } | ((props: PageProps) => Element)>' is not assignable to type 'LoaderComponent<{}>'.
Type 'ComponentClass<never, any> | FunctionComponent<never> | { default: ComponentType<never>; } | ((props: PageProps) => Element)' is not assignable to type 'ComponentClass<{}, any> | FunctionComponent<{}> | { default: ComponentType<{}>; }'.
Type 'ComponentClass<never, any>' is not assignable to type 'ComponentClass<{}, any> | FunctionComponent<{}> | { default: ComponentType<{}>; }'.
Type 'ComponentClass<never, any>' is not assignable to type 'ComponentClass<{}, any>'.
Types of property 'getDerivedStateFromProps' are incompatible.
Type 'GetDerivedStateFromProps<never, any> | undefined' is not assignable to type 'GetDerivedStateFromProps<{}, any> | undefined'.
Type 'GetDerivedStateFromProps<never, any>' is not assignable to type 'GetDerivedStateFromProps<{}, any>'.
Types of parameters 'nextProps' and 'nextProps' are incompatible.
Type 'Readonly<{}>' is not assignable to type 'never'.
```

ç²¾èª­ã™ã‚Œã°ã‚ˆãã‚ã‹ã‚‹ã®ã‹ã‚‚ã—ã‚Œãªã„ãŒï¼Œã¨ã¦ã‚‚èª­ã‚“ã§ã„ã‚‰ã‚Œãªã„åˆ†é‡ã ã£ãŸã®ã§èª­ã¿ã¾ã›ã‚“ï¼ˆæ®‹å½“ï¼‰

ã¾ã `dynamic` ã¨ã‹ã„ã†ã‚¤ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ãªã“ã¨ã‚’ã—ã¦ã„ã‚‹ã®ã§è‡´ã—æ–¹ãªã„ã¨ã„ãˆã°ãã‚Œã¾ã§ãªã®ã§ã™ãŒâ€¦â€¦

ã§ï¼Œã“ã®å‘¼ã³å‡ºã—æ–¹ã¯æš—é»™çš„ï¼ˆï¼Ÿï¼‰ã« Promise ã‚’è¿”ã™ã“ã¨ã«ãªã£ã¦ã„ã¦ï¼Œãã®ã¸ã‚“ã§å‹ã®å•é¡ŒãŒèµ·ãã¦ã„ã‚‹ã‚ˆã†ãªæ°—ãŒã—ã¾ã™

---

# è§£æ±ºï¼š `dynamic` ã«å‹ã‚’ä»˜ã‘ã‚

_next js dynamic import typescript_ ã‚ãŸã‚Šã§ã‚°ã‚°ã£ãŸã‚‰å‡ºã¦ãã¾ã—ãŸï¼`dynamic<HelloProps>(import('../components/hello').then((mod) => mod.Hello))` ã¿ãŸã„ã«ï¼Œ**_named import_ ã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ã‚³ãƒ³ãƒãƒãƒ³ãƒˆã® props ã®å‹ã‚’æ¸¡ã—ã¦ã‚„ã‚Œã°ã„ã„**ã‚ˆã†ã§ã™ï¼

> ```js
> // parent
> import dynamic from 'next/dynamic'
> import { MyComponentProps } from './interface'
>
> const MyComponent = dynamic<MyComponentProps>(() => import('./MyComponent').then((module) => module.MyComponent))
> ```

cf.
https://github.com/vercel/next.js/issues/22278#issuecomment-781194360

ãˆï½ï½ Props ã¨ã‹æ¸¡ã—ã¦ãªã„ãƒ—ãƒ¬ãƒ¼ãƒ³ãª JSX.Element ãªã‚“ã§ã™ã‘ã©ï½ï½ã¨ã„ã†å ´åˆã¯ï¼Œå‹ã¨ã—ã¦ `{}` ã‚’æ¸¡ã›ã°ã¨ã‚Šã‚ãˆãšé€šã‚‹ã‚ˆã†ã§ã™ï¼ˆ eslint ã«æ€’ã‚‰ã‚Œã‚‹å ´åˆã¯ ` @typescript-eslint/ban-types` ã§é»™ã‚‰ã›ã¾ã—ã‚‡ã†ï¼‰ï¼

> ```js
> import dynamic from 'next/dynamic'
> const MyComponent = dynamic<{}>(() => import('./MyComponent').then((module) => module.MyComponent))
> ```

å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯æ›¸ã„ã¦ã‚ã‚‹ã®ã« TypeScript ã ã¨äº‹æƒ…ãŒé•ã†ã¿ãŸã„ãªã®æ™‚ã€…é­é‡ã—ã¦ã‚‚ã«ã‚‡ã‚Šã¾ã‚‹ã‚ã­ï½ï½ã§ã‚‚å…ˆäººãŸã¡ã®è¨€è‘‰ã‚’ã©ã†ã«ã‹å¼„ã£ã¦ç”Ÿãæ®‹ã‚ŠãŸã„æ‰€å­˜ã§ã™ï¼
